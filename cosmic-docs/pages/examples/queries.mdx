import Tabs from '../../components/tabs'

# Queries

To show some of the advanced queries you can do, we're going to use some data stored in Cosmic for an e-commerce platform and perform some useful queries on it.

## Getting Started

You'll need to create a new Cosmic project in [your dashboard](https://app.cosmicjs.com/projects) by clicking the `Add New Project` button.

![add new project button](https://imgix.cosmicjs.com/b80673d0-e0f6-11ec-bb19-d9085ce408df-Screenshot-from-2022-05-31-10-31-01.png)

This will take you to a screen where you can enter the project name and decide if you want to use a template or not. For this project, keep all of the default selections and name the project `The Store`.

![create "The Store" project](https://imgix.cosmicjs.com/388a6710-db6f-11ec-bb19-d9085ce408df-thestorename.png)

You should see a screen like this when the project is created. Cosmic calls these projects `buckets` because that's how we refer to them in the code.

![bucket success page](https://imgix.cosmicjs.com/38a25be0-db6f-11ec-bb19-d9085ce408df-createdbucket.png)

From here, you can click `Skip to bucket settings`. Then you'll need to click the `Import/Export` button because we have an example dataset you can work with. You can download the [bucket data here](https://cdn.cosmicjs.com/2566c9c0-e0f7-11ec-bb19-d9085ce408df-the-store-production.json). Then you can upload it to your bucket through the `Import Bucket` widget.

![import bucket widget](https://imgix.cosmicjs.com/38a14a70-db6f-11ec-bb19-d9085ce408df-importdata.png)

![confirmation of upload](https://imgix.cosmicjs.com/1e707900-dc73-11ec-bb19-d9085ce408df-uploadconfirmation.png)

After the import finishes, you should see all of the `Products` in your bucket.

![products in the bucket after import](https://imgix.cosmicjs.com/feb38fc0-e0f6-11ec-bb19-d9085ce408df-Screenshot-from-2022-05-31-10-32-20.png)

That's all we need to start running queries! You could build an entire full-stack app around this data, but we're going to focus on the snippets for a number of queries that may come up.

## Basic Queries

**Note:** There are a couple of configs that will be used throughout the examples that we define here.

The `$BASE_URL` we'll use throughout these examples is `https://api.cosmicjs.com/v2/`.

If using Node.js, the following config is required:

```javascript
const Cosmic = require('cosmicjs')()
const bucket = Cosmic.bucket({
  slug: YOUR_BUCKET_SLUG,
  read_key: YOUR_BUCKET_READ_KEY
})
```

We will also be working with the `props` parameter in the requests to get concise data returned from the API. You can learn more about `props` [here](https://docs.cosmicjs.com/api-reference/objects#get-objects).

### Get all of the products

Retrieves all of the objects that are `products`.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    type: "products",
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"type":"products"} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        type: "products",
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{"type":"products"}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json
{
  "objects": [
    {
      "title": "Watch",
      "metadata": {
        "price": 259.99,
        "quantity": 63
      }
    },
    {
      "title": "Battery Charger",
      "metadata": {
        "price": 52.99,
        "quantity": 17
      }
    },
    {
      "title": "Pants",
      "metadata": {
        "price": 37.99,
        "quantity": 48
      }
    }
  ],
  "total": 21,
  "limit": 3
}
```

### Get products by title

Retrieves products with the given title.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    title: "Cupboard",
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"title":"Cupboard"} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        title: "Cupboard",
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{"title":"Cupboard"}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response for this query would look like:

```json
{
  "objects": [
    {
      "title": "Cupboard",
      "metadata": {
        "price": 239.99,
        "quantity": 15
      }
    }
  ],
  "total": 1
}
```

### Get a product by ID

You may need to get a product based on its ID that gets submitted via a hidden field in a form.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    id: "6283bc5a0c164700097679ff",
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"id":"6283bc5a0c164700097679ff"} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        id: "6283bc5a0c164700097679ff",
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{"id":"6283bc5a0c164700097679ff"}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Get multiple products by IDs

Now you may need to get a few different products based on their IDs that get submitted when a user places an order.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    id: ["6283c5a330b2e10009e43610","6283e0235882c30009b49e5f"],
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"id":["6283c5a330b2e10009e43610","6283e0235882c30009b49e5f"]} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        id: ["6283c5a330b2e10009e43610","6283e0235882c30009b49e5f"],
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{"id":["6283c5a330b2e10009e43610","6283e0235882c30009b49e5f"]}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Filter out products by IDs

You may need to filter products based on the IDs of items that have been sold out or something. In this case, we're filtering out the `Blouse` product because it's not available in certain sizes. This query will give us all of the products _except_ for the `Blouse`.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    id: {
      "$ne":"6283df2391f3660009da194b"
    },
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"id":{"$ne":"6283df2391f3660009da194b"}} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        id: {
          "$ne":"6283df2391f3660009da194b"
        },
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{"id":{"$ne":"6283df2391f3660009da194b"}}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Filter out products by IDs contained in an array

You may have a set of products you have on sale and you don't want them to show in the regular listings for a while. You can create an array of those specific product IDs and use this query to return all of the products except for the ones in the array.

In this example, we have the IDs of `Sandwich`, `Extension Cord`, and `Pineapple` in the request. So we will get a list of all of the products, excluding these 3.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    id: {
      "$nin":["6283dd60803a1a0009112e32","6283de686605090009c58739", "6283dddc6605090009c58736"]
    },
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```  
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"id":{"$nin":["6283dd60803a1a0009112e32","6283de686605090009c58739", "6283dddc6605090009c58736"]}} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        id: {
          "$nin":["6283dd60803a1a0009112e32","6283de686605090009c58739", "6283dddc6605090009c58736"]
        },
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{"id":{"$nin":["6283dd60803a1a0009112e32","6283de686605090009c58739", "6283dddc6605090009c58736"]}}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Get a product based on slug

You might use a product slug in the URL of your application depending on how you set things up. In this case, you can fetch the product with that slug value.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    slug:"hot-pot",
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"slug":"hot-pot"} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        slug:"hot-pot",
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{"slug":"hot-pot"}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Get products with any slug values

You may have some products you want to get specifically based on the products a customer has viewed. Maybe the slugs are stored in the local storage for data analytics and you want to look at a list of products based on these slugs.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    "$or": [{"slug":"pasta"},{"slug":"drill"}]
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"$or":[{"slug":"pasta"},{"slug":"drill"}]} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        "$or": [{"slug":"pasta"},{"slug":"drill"}]
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{"$or":[{"slug":"pasta"},{"slug":"drill"}]}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Get products based on the `content` value

The `content` value can be any string, but for our products, we'll consider it the same as a description. So someone might be searching your store based on keywords and you want to return a list of products that have something matching the keywords.

You can also specify a few different options, like in this example, making the search case-insensitive with `$options`.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    content: {
      "$regex": "is",
      "$options": "i",
    },
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"content":{"$regex":"is","$options":"i"}} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        content: {
          "$regex": "is",
          "$options": "i",
        }
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{"content":{"$regex":"is","$options":"i"}}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

## Metadata Queries

The metadata values are the ones you defined for your product object in Cosmic. That means you can query based on these values as well. They just become slightly more advanced queries.

### Get products based on price

Customers will often want to sort and filter products by price and you'll be able to return the exact products they are looking for.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    "type":"products",
    "metadata.price": 19.99
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"type":"products","metadata.price":19.99} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        "type":"products",
        "metadata.price": 19.99
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{"type":"products","metadata.price":19.99}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Get products based on any combination of metadata values

Again, customers like to sort and filter products based on what they're looking for. This query will return a list of products that are either in the `Electronics` category or that offer free shipping on products.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    type: "products",
    "$or":[{"metadata.category":"Electronics"},{"metadata.free_shipping":true}]
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"type": "products","$or":[{"metadata.category":"Electronics"},{"metadata.free_shipping":true}]} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        type: "products",
        "$or":[{"metadata.category":"Electronics"},{"metadata.free_shipping":true}]
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{type: "products","$or":[{"metadata.category":"Electronics"},{"metadata.free_shipping":true}]}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Get products that match a specific combination metadata values

Similar to the query above, this will let customers filter products and return very specific results. In this example, we will only return products that have less than 50 in stock _and_ have a `price` under $79.99.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    type: "products",
    "$and":[{"metadata.quantity":{"$lt":50}},{"metadata.price":{"$lt":79.99}}]
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"type": "products","$and":[{"metadata.quantity":{"$lt":50}},{"metadata.price":{"$lt":79.99}}]} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        type: "products",
        "$and":[{"metadata.quantity":{"$lt":50}},{"metadata.price":{"$lt":79.99}}]
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{type: "products","$and":[{"metadata.quantity":{"$lt":50}},{"metadata.price":{"$lt":79.99}}]}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Get products with a metadata value greater than or equal to a given value

When customers are shopping, they might want to see what the higher end products you have are. For example, maybe they want to see all of the products that cost over $100.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    type: "products",
    "metadata.price":{
      "$gte":100
    }
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"type": "products","metadata.price":{"$gte":100}} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
  ```javascript
  query ($bucket_slug: String!, $read_key: String, $query: JSON) {
    getObjects(
      bucket_slug: $bucket_slug
      read_key: $read_key
      input: {
        query: {
          type: "products",
          "metadata.price":{
            "$gte":100
          }
        }
      }
    ) {
      objects {
        id
        title
        slug
        metadata
      }
      total
    }
  }
  ```

</div>
<div label="CLI">
```bash
cosmic get-objects --query '{type: "products","metadata.price":{"$gte":100}}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Get products that match a specific metadata value

To get a list of products that particular match a category or an option, you can query based on the metadata values.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    type: "products",
    "metadata.category": "Food"
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"type": "products","metadata.category": "Food"} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        type: "products",
        "metadata.category": "Food"
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{type: "products","metadata.category": "Food"}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Get products based on nested JSON metadata values

Sometimes the product values that you work with on the front-end and back-end might vary a little. For example, with the `category`, you might need to distinguish your query based on the key value instead of the display name.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    type: "products",
    "metadata.details": {
      "brand":"Samsung"
    }
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"type": "products","metadata.details":{"brand":"Samsung"}} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        type: "products",
        "metadata.details":{
          "brand":"Samsung"
        }
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{type: "products","metadata.details":{"brand":"Samsung"}}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Get products not equal to a metadata value

A customer might want to look at all of the products you offer _except_ for those in the `Electronics` category.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    type: "products",
    "metadata.category": {
      "$ne": "Electronics"
    }
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"type": "products","metadata.category":{"$ne":"Electronics"}} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        type: "products",
        "metadata.category": {
          "$ne": "Electronics"
        }
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{type: "products","metadata.category":{"$ne":"Electronics"}}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```  
</div>
</Tabs>

The response will look like:

```json

```

### Get products that match a specific metadata value with a subset of multiple options

A customer might want to know if they can shop by color _and_ size can be expedited to them. So you could have a list of `options` on your products to make this search faster.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    type: "products",
    "metadata.options":["color","expedited"]
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"type": "products","metadata.options":["Color","Size"]} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        type: "products",
        "metadata.options":["color","expedited"]
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{type: "products","metadata.options":["color","expedited"]}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Get products that match a metadata value with any subset of multiple options

When customers are evaluating products, they might want to look at all of the products that let them customize their `size` regardless of any other options available. So if a product has the `size` option enabled, then it will be return in a list.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    type: "products",
    "metadata.options": {
      "$in":["Size"]
    }
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div>
<div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"type": "products","metadata.options":{"$in":["Size"]}} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        type: "products",
        "metadata.options": {
          "$in":["Size"]
        }
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{type: "products","metadata.options":{"$in":["Size"]}}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```

### Get products that don't match any values in a multi-option metadata value

Sometimes customers will want to see the products you have that don't meet certain requirements. Like, knowing which products don't have a `size` option might let customers know that they aren't looking at clothing.

<Tabs>
<div label="Node.js">
```javascript
bucket.getObjects({
  query: {
    type: "products",
    "metadata.options": {
      "$nin":["Size"]
    }
  },
  props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping",
  limit: 3
})
```
</div><div label="cURL">
```bash
curl ${BASE_URL}/buckets/${YOUR_BUCKET_SLUG}/objects \
-d read_key=${YOUR_BUCKET_READ_KEY} \
-d query={"type": "products","metadata.options":{"$nin":["Size"]}} \
-d props="slug,title,metadata.price,metadata.quantity,metadata.free_shipping" \
-d limit=3 \
```
</div>
<div label="GraphQL">
```javascript
query ($bucket_slug: String!, $read_key: String, $query: JSON) {
  getObjects(
    bucket_slug: $bucket_slug
    read_key: $read_key
    input: {
      query: {
        type: "products",
        "metadata.options": {
          "$nin":["Size"]
        }
      }
      props: "slug,title,metadata.price,metadata.quantity,metadata.free_shipping"
      limit: 3
    }
  ) {
    objects {
      id
      title
      slug
      metadata
    }
    total
  }
}
```
</div>
<div label="CLI">
```bash
cosmic get-objects --query '{type: "products","metadata.options":{"$nin":["Size"]}}' \
  --props 'slug,title,metadata.price,metadata.quantity,metadata.free_shipping' \
  --limit '3'
```
</div>
</Tabs>

The response will look like:

```json

```
