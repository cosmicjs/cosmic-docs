# Advanced Queries

There will be times when you need to retrieve data from Cosmic in more complex ways than simply querying a record by its slug or ID. For example, you might have an app that collects user information for an online store.

There will be times you need to fetch a list of users that have ordered a specific item or you need to decide who your super-users are based on them not purchasing at a certain time of day. 

We'll walk through a few of these scenarios and the code you can run to execute similiar queries.

## Some Code Set Up

The accompanying ES6 examples will use the following import and Cosmic object setup:

```js
import Cosmic from 'cosmicjs'

const api = Cosmic()

const bucket = api.bucket({
  slug: process.env.BUCKET_SLUG,
  read_key: process.env.READ_KEY,
  write_key: process.env.WRITE_KEY,
})
```

### Get objects with the exact object type

You may need to retrieve all of the items you have available in your store and you can use the following code snippets to do so.

<Tabs>
  <div label="REST">
  </div>
  <div label="Node.js">
    ```javascript
    bucket.getObjects({
        query: {
          type: "items",
        },
      })
    ```
  </div>
  <div label="GraphQL">
  </div>
  <div label="CLI">
  </div>
</Tabs>

### Get objects with the exact object title

There might be a certain product you need to look at and you have the title available from your front-end.

<Tabs>
  <div label="REST">
  </div>
  <div label="Node.js">
    ```javascript
    bucket.getObjects({
        query: {
          title: "Mango Nation Hat",
        },
      })
    ```
  </div>
  <div label="GraphQL">
  </div>
  <div label="CLI">
  </div>
</Tabs>

### Get objects with the exact ID

You may need to get an object based on its ID that was hidden in a form.

<Tabs>
  <div label="REST">
  </div>
  <div label="Node.js">
    ```javascript
    bucket.getObjects({
        query: {
          id: "item_id",
        },
      })
    ```
  </div>
  <div label="GraphQL">
  </div>
  <div label="CLI">
  </div>
</Tabs>

### Get objects with any IDs

You may need to get a some specific objects based on individual IDs.

<Tabs>
  <div label="REST">
  </div>
  <div label="Node.js">
    ```javascript
    bucket.getObjects({
        query: {
          id: ["item_id_1","item_id_2"],
        },
      })
    ```
  </div>
  <div label="GraphQL">
  </div>
  <div label="CLI">
  </div>
</Tabs>

### Get objects with any IDs not equal to a specific value

You may need to filter objects based on the IDs not having a specific value.

<Tabs>
  <div label="REST">
  </div>
  <div label="Node.js">
    ```javascript
    bucket.getObjects({
        query: {
          id: {
            "$ne":"item_id_1"
          },
        },
      })
    ```
  </div>
  <div label="GraphQL">
  </div>
  <div label="CLI">
  </div>
</Tabs>

### Get objects except with IDs contained in an array

You may have a set of objects you have on a separate list that you want to keep out of the objects you return.

<Tabs>
  <div label="REST">
  </div>
  <div label="Node.js">
    ```javascript
    bucket.getObjects({
        query: {
          id: {
            "$nin":["item_id_1","item_id_2"]
          },
        },
      })
    ```
  </div>
  <div label="GraphQL">
  </div>
  <div label="CLI">
  </div>
</Tabs>

### Get objects with exact slug

You may have a set of objects you have on a separate list that you want to keep out of the objects you return.

<Tabs>
  <div label="REST">
  </div>
  <div label="Node.js">
    ```javascript
    bucket.getObjects({
        query: {
          slug:"user_1",
        },
      })
    ```
  </div>
  <div label="GraphQL">
  </div>
  <div label="CLI">
  </div>
</Tabs>

### Get objects with string in content

You may have a set of objects you have on a separate list that you want to keep out of the objects you return.

You can also specify a few different options, like in this example, making the search case insensitive with `$options`.

<Tabs>
  <div label="REST">
  </div>
  <div label="Node.js">
    ```javascript
    bucket.getObjects({
        query: {
          content: {
            "$regex": "the moist pork",
            "$options": "i",
          },
        },
      })
    ```
  </div>
  <div label="GraphQL">
  </div>
  <div label="CLI">
  </div>
</Tabs>