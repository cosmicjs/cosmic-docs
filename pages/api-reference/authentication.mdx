import Callout from "nextra-theme-docs/callout";
import Tabs from "components/tabs";

# Authentication

## Get your token

You can get your authentication token in your user account settings located in <i><a href="https://cosmicjs.com/account/authentication">Account Settings > Authentication</a></i>. You can also make requests to the API with your `email` and `password`.

Send your `email` and `password` to receive your access token. Your access token will be used to add Buckets to your account as well as other account-related access.

<Callout emoji="⚠">
  **Note**
  <br />
  You do not need to use the token to access your Bucket content. Your Bucket
  has its own read and write keys for restricted access.
</Callout>

| Parameter | Required |  Type  | Description                |
| :-------- | :------: | :----: | :------------------------- |
| email     | required | String | Your Cosmic login email    |
| password  | required | String | Your Cosmic login password |

**Methods**

<Tabs>
<div label="REST">
```bash
POST $BASE_URL/authenticate
```

</div>

<div label="Node.js">
```javascript
Cosmic.authenticate()
```

**Example Request**

```javascript
const Cosmic = require("cosmicjs")(); // double parentheses to init function without token
Cosmic.authenticate({
  email: "you@youremail.com",
  password: "yourpassword",
})
  .then((data) => {
    console.log(data);
  })
  .catch((err) => {
    console.log(err);
  });
```

</div>

<div label="GraphQL">
```javascript
getAccessToken(email, password)
```
<a href="https://cosmic-graphql-playground.netlify.app/?endpoint=https://graphql.cosmicjs.com/v2&query=%7B%0A%20%20getAccessToken(email%3A%20%22joe%40joes.com%22%2C%20password%3A%20%22myCatIsTheBest%22)%0A%7D">Full screen</a>
<iframe src="https://cosmic-graphql-playground.netlify.app/?endpoint=https://graphql.cosmicjs.com/v2&query=%7B%0A%20%20getAccessToken(email%3A%20%22joe%40joes.com%22%2C%20password%3A%20%22myCatIsTheBest%22)%0A%7D" frameBorder="0" style={{ width: '100%', height: '470px'}}></iframe>
</div>
<div label="CLI">
```bash
cosmic login
```
**Example Request**
```bash
$ cosmic login
  ? Email: starman@gmail.com
  ? Password: [hidden]
Authenticated
```
</div>
</Tabs>

**Example Body (JSON)**

```json
{
  "email": "you@youremail.com",
  "password": "yourpassword"
}
```

**Example Response**

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXV.eyJlbWFpbCI6InNwaXJvbnl..."
}
```

## Use your token

You can use the Authentication token using REST requests to the API

**Example -> Get Buckets**

<Callout emoji="⚠">
  **Required**
  <br />
  `token` must be passed as `Authorization Bearer` in the header of the request.
</Callout>

**Methods**

<Tabs>
<div label="REST">

```bash
GET $BASE_URL/buckets
```

**Header**

```json
{
  "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXV.eyJlbWFpbCI6InNwaXJvbnl..."
}
```

</div>

<div label="Node.js">
```javascript
Cosmic.getBuckets()
```

**Example Request**

```javascript
const Cosmic = require("cosmicjs")({
  token: "your-token-from-auth-request", // optional
});
Cosmic.getBuckets()
  .then((data) => {
    console.log(data);
  })
  .catch((err) => {
    console.log(err);
  });
```

</div>

<div label="GraphQL">
```javascript
getBuckets()
```
**Header**

```json
{
  "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXV.eyJlbWFpbCI6InNwaXJvbnl..."
}
```

<a href="https://cosmic-graphql-playground.netlify.app/?endpoint=https://graphql.cosmicjs.com/v2&query=%7B%0A%20%20getBuckets%20%7B%0A%20%20%20%20title%0A%20%20%7D%0A%7D">Full screen</a>
<iframe src="https://cosmic-graphql-playground.netlify.app/?endpoint=https://graphql.cosmicjs.com/v2&query=%7B%0A%20%20getBuckets%20%7B%0A%20%20%20%20title%0A%20%20%7D%0A%7D" frameBorder="0" style={{ width: '100%', height: '470px'}}></iframe>
</div>
<div label="CLI">
```bash
cosmic get-buckets
```
**Example Request**
```bash
$ cosmic get-buckets
```
</div>
</Tabs>
